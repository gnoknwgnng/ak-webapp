# Leap Cell deployment configuration
name: websight-pro
runtime: nodejs20

# Environment variables
env:
  NODE_ENV: production

# Static file serving (main site)
static:
  - source: public
    target: /
  - source: index.html
    target: /index.html

# Function definitions
functions:
  - name: analyze
    handler: api/analyze.js
    timeout: 60s
    memory: 512MB
    events:
      - http:
          path: /api/analyze
          method: POST
      - http:
          path: /api/analyze
          method: OPTIONS

# Build configuration
build:
  commands:
    - npm install
  
# Scaling configuration
scaling:
  minInstances: 0
  maxInstances: 10
  targetConcurrency: 100