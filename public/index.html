<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSight Pro - Advanced Website Analyzer</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        #urlInput:focus {
            outline: none;
            border-color: #667eea !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .loading {
            text-align: center;
            padding: 80px 40px;
            display: none;
            background: white;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f1f5f9;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .results {
            display: none;
            background: #f8fafc;
        }
        
        .results-header {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .results-content {
            padding: 40px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .metric-score {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 15px 0 8px 0;
        }
        
        .report-section {
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            flex: 1;
            margin-left: 15px;
        }
        
        .section-content {
            padding: 30px;
            display: none;
        }
        
        .section-content.active {
            display: block;
        }
        
        .error {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 1px solid #fca5a5;
            color: #991b1b;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .dashboard-grid { 
                grid-template-columns: 1fr; 
            }
            h1 {
                font-size: 2.5rem !important;
            }
        }
    </style>
</head>
<body>    
<!-- Navigation Header -->
    <nav style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0,0,0,0.1); position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 0 20px;">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; height: 70px;">
            <div style="display: flex; align-items: center;">
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                    <i class="fas fa-chart-line" style="color: white; font-size: 18px;"></i>
                </div>
                <span style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">WebSight Pro</span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div style="min-height: 100vh; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%); padding-top: 70px; position: relative; overflow: hidden;">
        <!-- Decorative Elements -->
        <div style="position: absolute; top: 10%; left: 5%; width: 100px; height: 100px; background: linear-gradient(135deg, #667eea20, #764ba220); border-radius: 50%; opacity: 0.6;"></div>
        <div style="position: absolute; top: 20%; right: 10%; width: 150px; height: 150px; background: linear-gradient(135deg, #f59e0b20, #d9770620); border-radius: 30px; transform: rotate(45deg); opacity: 0.4;"></div>
        <div style="position: absolute; bottom: 20%; left: 10%; width: 80px; height: 80px; background: linear-gradient(135deg, #10b98120, #05966920); border-radius: 20px; opacity: 0.5;"></div>
        
        <div style="max-width: 1200px; margin: 0 auto; padding: 100px 20px 50px; text-align: center; position: relative; z-index: 2;">
            <!-- Main Headline -->
            <h1 style="font-size: 4rem; font-weight: 800; color: #1e293b; margin-bottom: 30px; line-height: 1.1;">
                A Website Analyzer Built For
                <br>
                <span style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    Developers Who Ship
                </span>
            </h1>
            
            <!-- Subtitle -->
            <p style="font-size: 1.3rem; color: #64748b; margin-bottom: 50px; max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.6;">
                AI-powered platform delivering comprehensive SEO audits, grammar analysis, and performance insights in seconds.
            </p>
            
            <!-- CTA Section -->
            <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto 60px; border: 1px solid rgba(0,0,0,0.05);">
                <div style="display: flex; gap: 15px; margin-bottom: 20px; align-items: stretch;">
                    <div style="flex: 1; position: relative;">
                        <i class="fas fa-globe" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #94a3b8; font-size: 18px;"></i>
                        <input 
                            type="url" 
                            placeholder="Enter your website URL (e.g., https://example.com)"
                            id="urlInput"
                            style="width: 100%; padding: 18px 20px 18px 55px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 16px; transition: all 0.3s ease; background: #f8fafc;"
                        >
                    </div>
                    <button onclick="analyzeWebsite()" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 18px 30px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; white-space: nowrap;">
                        <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                        Analyze Now
                    </button>
                </div>
                
                <div style="display: flex; align-items: center; justify-content: center; gap: 20px; color: #64748b; font-size: 0.9rem;">
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-check-circle" style="color: #10b981; margin-right: 6px;"></i>
                        Free Analysis
                    </div>
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-clock" style="color: #10b981; margin-right: 6px;"></i>
                        Results in 10 seconds
                    </div>
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-shield-alt" style="color: #10b981; margin-right: 6px;"></i>
                        No signup required
                    </div>
                </div>
            </div>
        </div>
    </div>    <!-
- Features Section -->
    <div style="background: white; padding: 100px 20px;">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
            <h2 style="font-size: 2.5rem; font-weight: 700; color: #1e293b; margin-bottom: 20px;">
                Everything You Need to Optimize Your Website
            </h2>
            <p style="font-size: 1.1rem; color: #64748b; margin-bottom: 60px; max-width: 600px; margin-left: auto; margin-right: auto;">
                Comprehensive analysis powered by advanced AI to help you improve SEO, content quality, and user experience.
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px;">
                <div class="feature-card" style="text-align: left; padding: 30px; border-radius: 16px; border: 1px solid #e2e8f0; transition: all 0.3s ease; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);">
                    <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); width: 60px; height: 60px; border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-search-plus" style="color: white; font-size: 24px;"></i>
                    </div>
                    <h3 style="font-size: 1.3rem; font-weight: 600; color: #1e293b; margin-bottom: 12px;">SEO Analysis</h3>
                    <p style="color: #64748b; line-height: 1.6; margin: 0;">Complete SEO audit with keyword analysis, meta tag optimization, and search engine visibility recommendations.</p>
                </div>
                
                <div class="feature-card" style="text-align: left; padding: 30px; border-radius: 16px; border: 1px solid #e2e8f0; transition: all 0.3s ease; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
                    <div style="background: linear-gradient(135deg, #f59e0b, #d97706); width: 60px; height: 60px; border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-spell-check" style="color: white; font-size: 24px;"></i>
                    </div>
                    <h3 style="font-size: 1.3rem; font-weight: 600; color: #1e293b; margin-bottom: 12px;">Grammar & Content</h3>
                    <p style="color: #64748b; line-height: 1.6; margin: 0;">AI-powered grammar checking, readability analysis, and content quality assessment with specific improvement suggestions.</p>
                </div>
                
                <div class="feature-card" style="text-align: left; padding: 30px; border-radius: 16px; border: 1px solid #e2e8f0; transition: all 0.3s ease; background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);">
                    <div style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); width: 60px; height: 60px; border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-tachometer-alt" style="color: white; font-size: 24px;"></i>
                    </div>
                    <h3 style="font-size: 1.3rem; font-weight: 600; color: #1e293b; margin-bottom: 12px;">Performance Metrics</h3>
                    <p style="color: #64748b; line-height: 1.6; margin: 0;">Technical performance analysis including page speed, mobile optimization, and accessibility compliance.</p>
                </div>
                
                <div class="feature-card" style="text-align: left; padding: 30px; border-radius: 16px; border: 1px solid #e2e8f0; transition: all 0.3s ease; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);">
                    <div style="background: linear-gradient(135deg, #10b981, #059669); width: 60px; height: 60px; border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i class="fas fa-chart-line" style="color: white; font-size: 24px;"></i>
                    </div>
                    <h3 style="font-size: 1.3rem; font-weight: 600; color: #1e293b; margin-bottom: 12px;">Actionable Insights</h3>
                    <p style="color: #64748b; line-height: 1.6; margin: 0;">Prioritized recommendations with clear action items and expected impact on your website's performance.</p>
                </div>
            </div>
        </div>
    </div>
        
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <h3 id="loadingTitle">Analyzing Your Website</h3>
        <p id="loadingMessage">Our AI is examining every aspect of your site. This will take just a few seconds...</p>
    </div>
    
    <div class="results" id="results">
        <div class="results-header">
            <h2><i class="fas fa-chart-pie"></i> Analysis Complete</h2>
            <p id="analysisUrl"></p>
        </div>
        <div class="results-content">
            <div id="reportContent"></div>
        </div>
    </div>    <s
cript>
        async function analyzeWebsite() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Please enter a valid URL');
                return;
            }
            
            // Validate URL format
            try {
                new URL(url);
            } catch {
                alert('Please enter a valid URL format (e.g., https://example.com)');
                return;
            }
            
            // Scroll to results area
            document.getElementById('loading').scrollIntoView({ behavior: 'smooth' });
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            document.querySelector('button[onclick="analyzeWebsite()"]').disabled = true;
            
            try {
                const startTime = Date.now();
                // Determine the API endpoint based on environment
                const apiEndpoint = window.location.hostname.includes('netlify') 
                    ? '/.netlify/functions/analyze'  // Netlify endpoint
                    : window.location.hostname.includes('leap') 
                    ? '/api/analyze'  // Leap Cell endpoint
                    : '/api/analyze'; // Local development
                
                const response = await fetch(apiEndpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ url })
                });
                
                const data = await response.json();
                const analysisTime = ((Date.now() - startTime) / 1000).toFixed(1);
                
                console.log('Received data:', data);
                
                console.log('API Response:', data); // Debug log
                
                if (data.success || data.performanceMetrics || data.executiveSummary) {
                    window.lastAnalysisTime = analysisTime;
                    displayResults(data);
                } else if (data.error) {
                    displayError(data.error);
                } else {
                    // Try to display anyway - might be a different format
                    console.log('Attempting to display data anyway:', data);
                    displayResults(data);
                }
                
            } catch (error) {
                console.error('Analysis error:', error);
                displayError('Network error: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.querySelector('button[onclick="analyzeWebsite()"]').disabled = false;
            }
        }
        
        function displayResults(data) {
            console.log('Received data:', data); // Debug log
            
            document.getElementById('analysisUrl').textContent = `Analysis for: ${data.url || 'Unknown'}`;
            
            const reportContent = document.getElementById('reportContent');
            
            // Handle different response formats
            let metrics, structured;
            if (data.performanceMetrics && data.structuredReport) {
                // New format
                metrics = data.performanceMetrics;
                structured = data.structuredReport;
            } else if (data.performanceMetrics) {
                // Direct format
                metrics = data.performanceMetrics;
                structured = data;
            } else {
                // Fallback - create default metrics
                metrics = {
                    overall: 75,
                    seo: 70,
                    content: 80,
                    technical: 75
                };
                structured = data;
            }
            
            const overallScore = metrics.overall || 0;
            const seoScore = metrics.seo || 0;
            const grammarScore = metrics.content || metrics.grammar || 0;
            const performanceScore = metrics.technical || metrics.performance || 0;
            
            // Create the HTML using string concatenation instead of template literals
            const dashboardHTML = 
                '<!-- Performance Dashboard -->' +
                '<div class="dashboard-grid">' +
                    '<div class="metric-card" style="border-left: 4px solid #3b82f6;">' +
                        '<div style="display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">' +
                            '<i class="fas fa-search" style="font-size: 24px; color: #3b82f6; margin-right: 12px;"></i>' +
                            '<h3 style="margin: 0; color: #1e293b;">SEO Score</h3>' +
                        '</div>' +
                        '<div class="metric-score" style="color: ' + getScoreColor(seoScore) + ';">' + seoScore + '/100</div>' +
                        '<div style="color: #64748b; font-size: 0.9rem;">Search optimization level</div>' +
                    '</div>' +
                    
                    '<div class="metric-card" style="border-left: 4px solid #f59e0b;">' +
                        '<div style="display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">' +
                            '<i class="fas fa-spell-check" style="font-size: 24px; color: #f59e0b; margin-right: 12px;"></i>' +
                            '<h3 style="margin: 0; color: #1e293b;">Content Quality</h3>' +
                        '</div>' +
                        '<div class="metric-score" style="color: ' + getScoreColor(grammarScore) + ';">' + grammarScore + '/100</div>' +
                        '<div style="color: #64748b; font-size: 0.9rem;">Grammar & readability</div>' +
                    '</div>' +
                    
                    '<div class="metric-card" style="border-left: 4px solid #8b5cf6;">' +
                        '<div style="display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">' +
                            '<i class="fas fa-cogs" style="font-size: 24px; color: #8b5cf6; margin-right: 12px;"></i>' +
                            '<h3 style="margin: 0; color: #1e293b;">Technical</h3>' +
                        '</div>' +
                        '<div class="metric-score" style="color: ' + getScoreColor(performanceScore) + ';">' + performanceScore + '/100</div>' +
                        '<div style="color: #64748b; font-size: 0.9rem;">Technical performance</div>' +
                    '</div>' +
                    
                    '<div class="metric-card" style="border-left: 4px solid #10b981;">' +
                        '<div style="display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">' +
                            '<i class="fas fa-chart-bar" style="font-size: 24px; color: #10b981; margin-right: 12px;"></i>' +
                            '<h3 style="margin: 0; color: #1e293b;">Overall</h3>' +
                        '</div>' +
                        '<div class="metric-score" style="color: ' + getScoreColor(overallScore) + ';">' + overallScore + '/100</div>' +
                        '<div style="color: #64748b; font-size: 0.9rem;">Website health</div>' +
                    '</div>' +
                '</div>';
            
            reportContent.innerHTML = dashboardHTML +

                '<!-- Executive Summary -->' +
                '<div class="report-section">' +
                    '<div class="section-header" onclick="toggleSection(this)">' +
                        '<i class="fas fa-chart-line"></i>' +
                        '<div class="section-title">Executive Summary</div>' +
                        '<i class="fas fa-chevron-down" style="margin-left: auto;"></i>' +
                    '</div>' +
                    '<div class="section-content active">' +
                        formatExecutiveSummary(structured.executiveSummary, data) +
                    '</div>' +
                '</div>' +

                '<!-- Technical Analysis -->' +
                '<div class="report-section">' +
                    '<div class="section-header" onclick="toggleSection(this)">' +
                        '<i class="fas fa-cogs"></i>' +
                        '<div class="section-title">Technical Analysis</div>' +
                        '<i class="fas fa-chevron-down" style="margin-left: auto;"></i>' +
                    '</div>' +
                    '<div class="section-content">' +
                        generateTechnicalAnalysisHTML(structured.technicalAnalysis) +
                    '</div>' +
                '</div>' +

                '<!-- SEO Recommendations -->' +
                '<div class="report-section">' +
                    '<div class="section-header" onclick="toggleSection(this)">' +
                        '<i class="fas fa-search-plus"></i>' +
                        '<div class="section-title">SEO Optimization</div>' +
                        '<i class="fas fa-chevron-down" style="margin-left: auto;"></i>' +
                    '</div>' +
                    '<div class="section-content">' +
                        generateSEORecommendationsHTML(structured.seoRecommendations) +
                    '</div>' +
                '</div>' +

                '<!-- Action Plan -->' +
                '<div class="report-section">' +
                    '<div class="section-header" onclick="toggleSection(this)">' +
                        '<i class="fas fa-tasks"></i>' +
                        '<div class="section-title">Priority Action Plan</div>' +
                        '<i class="fas fa-chevron-down" style="margin-left: auto;"></i>' +
                    '</div>' +
                    '<div class="section-content">' +
                        generateActionPlanHTML(structured.actionPlan) +
                    '</div>' +
                '</div>' +

                '<!-- Detailed Findings -->' +
                '<div class="report-section">' +
                    '<div class="section-header" onclick="toggleSection(this)">' +
                        '<i class="fas fa-microscope"></i>' +
                        '<div class="section-title">Detailed AI Analysis</div>' +
                        '<i class="fas fa-chevron-down" style="margin-left: auto;"></i>' +
                    '</div>' +
                    '<div class="section-content">' +
                        formatDetailedFindings(structured.detailedFindings) +
                    '</div>' +
                '</div>';
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }     
   function getScoreColor(score) {
            if (score >= 80) return '#10b981';
            if (score >= 60) return '#f59e0b';
            return '#ef4444';
        }

        function formatExecutiveSummary(summary, data) {
            return `
                <div style="background: #f8fafc; padding: 20px; border-radius: 12px; border-left: 4px solid #667eea; margin-bottom: 20px;">
                    <h4 style="color: #1e293b; margin-bottom: 15px;">Website Overview</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div><strong>Title:</strong> ${data.scrapedData?.title || 'Missing'}</div>
                        <div><strong>Word Count:</strong> ${data.scrapedData?.wordCount || 0}</div>
                        <div><strong>Images:</strong> ${data.scrapedData?.images?.length || 0}</div>
                        <div><strong>Links:</strong> ${data.scrapedData?.links?.length || 0}</div>
                    </div>
                </div>
                <div style="line-height: 1.6; color: #374151;">
                    ${typeof summary === 'object' ? formatStructuredSummary(summary) : (summary || 'Analysis completed successfully. Your website has been thoroughly examined for SEO, content quality, and technical performance.')}
                </div>
            `;
        }

        function formatStructuredSummary(summary) {
            if (!summary) return 'Analysis completed successfully.';
            
            return `
                <div style="background: #f0f9ff; padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                    <h5 style="color: #1e293b; margin-bottom: 10px;">Overall Assessment</h5>
                    <p style="margin: 0; color: #374151;">${summary.overallAssessment || 'Website analysis completed.'}</p>
                </div>
                
                ${summary.keyStrengths?.length ? `
                <div style="background: #f0fdf4; padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                    <h5 style="color: #15803d; margin-bottom: 10px;">Key Strengths</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #374151;">
                        ${summary.keyStrengths.map(strength => `<li style="margin-bottom: 5px;">${strength}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}
                
                ${summary.criticalIssues?.length ? `
                <div style="background: #fef2f2; padding: 20px; border-radius: 12px;">
                    <h5 style="color: #dc2626; margin-bottom: 10px;">Areas for Improvement</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #374151;">
                        ${summary.criticalIssues.map(issue => `<li style="margin-bottom: 5px;">${issue}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}
            `;
        }

        function formatDetailedFindings(findings) {
            if (typeof findings === 'object' && findings) {
                return Object.entries(findings).map(([key, section]) => `
                    <div style="background: white; border: 1px solid #e2e8f0; border-radius: 12px; margin-bottom: 20px; overflow: hidden;">
                        <div style="background: #667eea; color: white; padding: 15px;">
                            <h4 style="margin: 0;">${section.title || key}</h4>
                        </div>
                        <div style="padding: 20px;">
                            ${section.findings?.map((finding, index) => `
                                <div style="margin-bottom: 15px; padding: 15px; background: #f8fafc; border-radius: 8px;">
                                    <strong>${index + 1}.</strong> ${finding}
                                </div>
                            `).join('') || '<p>No specific findings available.</p>'}
                        </div>
                    </div>
                `).join('');
            }
            
            return `<div style="background: #f8fafc; padding: 20px; border-radius: 12px;"><p>${findings || 'Detailed analysis completed successfully.'}</p></div>`;
        }

        function generateTechnicalAnalysisHTML(technical) {
            if (!technical) return '<p>Technical analysis completed.</p>';
            
            return `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: #f0f9ff; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #1e293b; margin-bottom: 15px;">Page Structure</h4>
                        <div><strong>Title:</strong> ${technical.pageStructure?.title || 'Missing'}</div>
                        <div><strong>Meta Description:</strong> ${technical.pageStructure?.metaDescriptionLength || 0} characters</div>
                        <div><strong>Headings:</strong> ${technical.pageStructure?.headingStructure?.length || 0} found</div>
                    </div>
                    
                    <div style="background: #f0fdf4; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #1e293b; margin-bottom: 15px;">Media Analysis</h4>
                        <div><strong>Total Images:</strong> ${technical.mediaOptimization?.totalImages || 0}</div>
                        <div><strong>With Alt Text:</strong> ${technical.mediaOptimization?.imagesWithAlt || 0}</div>
                        <div><strong>Missing Alt Text:</strong> ${technical.mediaOptimization?.imagesWithoutAlt || 0}</div>
                    </div>
                </div>
            `;
        }

        function generateSEORecommendationsHTML(seo) {
            if (!seo?.recommendations?.length) return '<p>No specific SEO recommendations available.</p>';
            
            return seo.recommendations.map(rec => `
                <div style="background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <span style="background: ${rec.priority === 'high' ? '#ef4444' : rec.priority === 'medium' ? '#f59e0b' : '#10b981'}; color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; margin-right: 12px;">
                            ${rec.priority.toUpperCase()}
                        </span>
                        <h5 style="margin: 0;">${rec.category}</h5>
                    </div>
                    <p style="margin: 0; color: #64748b;"><strong>Issue:</strong> ${rec.issue}</p>
                    <p style="margin: 8px 0 0 0; color: #374151;"><strong>Recommendation:</strong> ${rec.recommendation}</p>
                </div>
            `).join('');
        }

        function generateActionPlanHTML(actionPlan) {
            if (!actionPlan) return '<p>Action plan not available.</p>';
            
            return `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: #fef2f2; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #dc2626; margin-bottom: 15px;">Immediate Actions</h4>
                        ${actionPlan.immediate?.length ? `
                            <ul style="margin: 0; padding-left: 20px;">
                                ${actionPlan.immediate.map(action => `<li style="margin-bottom: 8px;">${action}</li>`).join('')}
                            </ul>
                        ` : '<p style="color: #10b981;">No immediate actions required!</p>'}
                    </div>
                    
                    <div style="background: #fef3c7; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #d97706; margin-bottom: 15px;">Short-term Goals</h4>
                        ${actionPlan.shortTerm?.length ? `
                            <ul style="margin: 0; padding-left: 20px;">
                                ${actionPlan.shortTerm.map(action => `<li style="margin-bottom: 8px;">${action}</li>`).join('')}
                            </ul>
                        ` : '<p style="color: #64748b;">No short-term actions needed.</p>'}
                    </div>
                </div>
            `;
        }
        
        function displayError(error) {
            const reportContent = document.getElementById('reportContent');
            
            reportContent.innerHTML = `
                <div class="error">
                    <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Analysis Failed</h3>
                    <p>${error}</p>
                    <p>Please check the URL and try again.</p>
                </div>
            `;
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        function toggleSection(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.fas.fa-chevron-down');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                content.style.display = 'none';
                if (icon) icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                content.style.display = 'block';
                if (icon) icon.style.transform = 'rotate(180deg)';
            }
        }
        
        // Allow Enter key to trigger analysis
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeWebsite();
            }
        });
    </script>
</body>
</html>